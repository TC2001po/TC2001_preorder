<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>관리자 주문 내역</title>
  <script>
    // 페이지 로드 시 주문 내역을 실시간으로 가져오는 함수
    async function loadOrders() {
      try {
        const response = await fetch('/api/orders-read');
        const data = await response.json();
        const ordersContainer = document.getElementById('orders-container');
        ordersContainer.innerHTML = '';

        if (data.orders.length === 0) {
          ordersContainer.innerHTML = '<p>주문 내역이 없습니다.</p>';
        } else {
          data.orders.forEach(order => {
            const orderElement = document.createElement('div');
            orderElement.innerHTML = `
              <p><strong>메뉴:</strong> ${order.menu}, <strong>온도:</strong> ${order.hotIce}, <strong>수량:</strong> ${order.count}잔</p>
              <p><strong>옵션:</strong> ${order.options}</p>
              <p><strong>이름:</strong> ${order.customerName}, <strong>소속:</strong> ${order.customerAffiliation}</p>
              <p><strong>픽업 시간:</strong> ${order.pickupTime}</p>
              <hr />
            `;
            ordersContainer.appendChild(orderElement);
          });
        }
      } catch (error) {
        console.error('주문 내역을 불러오는 중 오류가 발생했습니다.', error);
      }
    }

    // 페이지 로드 시 자동으로 주문 내역을 가져옴
    window.onload = loadOrders;
  </script>
</head>
<body>
  <h1>관리자 주문 내역</h1>
  <div id="orders-container"></div>
</body>
</html>